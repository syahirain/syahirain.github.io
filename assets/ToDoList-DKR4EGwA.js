import{P as X,T as F,_ as G,a as K,b as R,c as P,d as T,e as q,f as x}from"./TableCaption.vue_vue_type_script_setup_true_lang-CDsVD3bC.js";import{_ as H,a as Q}from"./TabsContent.vue_vue_type_script_setup_true_lang-BuAcsid8.js";import{a8 as W,d as w,r as y,J as C,K as S,p as L,o as h,i as v,w as e,a,u as t,L as k,e as l,b as f,M as O,N as Y,O as Z,c as D,F as E,C as tt,y as at,A as et,n as st,t as b}from"./index-Dy1s030t.js";import{P as nt,_ as A,b as I,c as B,d as j,e as N,f as U,a as V,g as z,C as lt}from"./DialogFooter.vue_vue_type_script_setup_true_lang-YVaS5XyY.js";import{_ as J}from"./Label.vue_vue_type_script_setup_true_lang-CEkesuBw.js";const $=W("apiData1",{state:()=>({data:null,data_length:0,loading:!1,error:null}),actions:{async fetchData(){try{if(this.loading=!0,localStorage.token){const _=await(await fetch("https://ahmadsyahiransite.site/api/tasks",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.token}})).json();this.data=_,this.data_length=_.length,this.error=null}}catch(s){this.error=s.message}finally{this.loading=!1}}},getters:{tasks:s=>s.data,tasksLength:s=>s.data_length,isLoading:s=>s.loading,getError:s=>s.error}}),ot={class:"grid gap-4 py-4"},it={class:"grid grid-cols-4 items-center gap-4"},ct=w({__name:"AddTasks",setup(s){async function _(){await r.fetchData()}const i=y(""),u=y(!0),r=$(),p=C(),{toast:m}=S();async function n(){try{const c=await fetch("https://ahmadsyahiransite.site/api/tasks",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+p.authToken},body:JSON.stringify({task:i.value})});if(c.ok){_();const o=await c.json();m({title:"Status",description:o.message})}else console.error("Login failed",c.statusText)}catch(c){console.log(c),console.error("An error occurred during login",c)}}return L(i,async()=>{u.value=i.value===""}),(c,o)=>(h(),v(t(z),null,{default:e(()=>[a(t(A),{"as-child":""},{default:e(()=>[a(t(k),{variant:"outline"},{default:e(()=>[a(t(nt),{class:"w-4 h-4 mr-2"}),l("Create New Task ")]),_:1})]),_:1}),a(t(V),{class:"sm:max-w-[425px]"},{default:e(()=>[a(t(I),null,{default:e(()=>[a(t(B),null,{default:e(()=>[l("Create new task")]),_:1}),a(t(j),null,{default:e(()=>[l(" Please enter task details. ")]),_:1})]),_:1}),f("div",ot,[f("div",it,[a(t(J),{for:"name",class:"text-right"},{default:e(()=>[l(" Task ")]),_:1}),a(t(O),{id:"name",modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=d=>i.value=d),class:"col-span-3"},null,8,["modelValue"])])]),a(t(N),null,{default:e(()=>[a(t(U),{"as-child":""},{default:e(()=>[a(t(k),{type:"submit",onClick:n,disabled:u.value},{default:e(()=>[l(" Add task ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1}))}}),rt={class:"grid gap-4 py-4"},dt={class:"grid grid-cols-4 items-center gap-4"},ut=w({__name:"UpdateTasks",props:["task","taskId"],setup(s){async function _(){await c.fetchData()}const{task:i,taskId:u}=s,r=y(""),p=y(!0),m=C(),{toast:n}=S(),c=$();r.value=i;async function o(){try{const d=await fetch("https://ahmadsyahiransite.site/api/tasks/"+u,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+m.authToken},body:JSON.stringify({task:r.value})});if(d.ok){_();const g=await d.json();n({title:"Status",description:g.message})}else console.error("Login failed",d.statusText)}catch(d){console.log(d),console.error("An error occurred during login",d)}}return L(r,async()=>{p.value=r.value===""||r.value===i}),(d,g)=>(h(),v(t(z),null,{default:e(()=>[a(t(A),{"as-child":""},{default:e(()=>[a(t(k),{variant:"outline",size:"icon",class:"mx-1"},{default:e(()=>[a(t(X),{class:"w-5 h-5 mx-1"})]),_:1})]),_:1}),a(t(V),{class:"sm:max-w-[425px]"},{default:e(()=>[a(t(I),null,{default:e(()=>[a(t(B),null,{default:e(()=>[l("Update task")]),_:1}),a(t(j),null,{default:e(()=>[l(" Please enter task details. ")]),_:1})]),_:1}),f("div",rt,[f("div",dt,[a(t(J),{for:"name",class:"text-right"},{default:e(()=>[l(" Task ")]),_:1}),a(t(O),{id:"name",modelValue:r.value,"onUpdate:modelValue":g[0]||(g[0]=M=>r.value=M),class:"col-span-3"},null,8,["modelValue"])])]),a(t(N),null,{default:e(()=>[a(t(U),{"as-child":""},{default:e(()=>[a(t(k),{type:"submit",onClick:o,disabled:p.value},{default:e(()=>[l(" Update task ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1}))}}),_t=f("span",{class:"font-bold"},"delete-task",-1),ft={class:"grid gap-4 py-4"},pt={class:"grid grid-cols-4 items-center gap-4"},ht=w({__name:"DeleteTasks",props:["taskId"],setup(s){const{taskId:_}=s,i=y(""),u=y(!0),r=$(),p=C(),{toast:m}=S();async function n(){await r.fetchData()}L(i,async()=>{u.value=i.value!=="delete-task"});async function c(){try{const o=await fetch("https://ahmadsyahiransite.site/api/tasks/"+_,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+p.authToken}});o.ok?(n(),m({title:"Status",description:"Task deleted"})):console.error("Delete failed",o.statusText)}catch(o){console.log(o),console.error("An error occurred during delete task",o)}}return(o,d)=>(h(),v(t(z),null,{default:e(()=>[a(t(A),{"as-child":""},{default:e(()=>[a(t(k),{variant:"outline",size:"icon",class:"mx-1"},{default:e(()=>[a(t(F),{class:"w-5 h-5 mx-1"})]),_:1})]),_:1}),a(t(V),{class:"sm:max-w-[425px]"},{default:e(()=>[a(t(I),null,{default:e(()=>[a(t(B),null,{default:e(()=>[l("Delete task")]),_:1}),a(t(j),null,{default:e(()=>[l(" Type "),_t,l(" and click Delete button. ")]),_:1})]),_:1}),f("div",ft,[f("div",pt,[Y(f("input",{id:"name","onUpdate:modelValue":d[0]||(d[0]=g=>i.value=g),class:"col-span-3",placeholder:"type here"},null,512),[[Z,i.value]])])]),a(t(N),null,{default:e(()=>[a(t(U),{"as-child":""},{default:e(()=>[a(t(k),{type:"submit",onClick:c,disabled:u.value},{default:e(()=>[l(" Delete ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1}))}}),mt=w({__name:"TaskCheckbox",props:["taskComplete","taskId"],setup(s){const{taskComplete:_,taskId:i}=s,u=C(),{toast:r}=S(),p=$();async function m(){await p.fetchData()}async function n(){try{const c=_=="O"?"X":"O",o=await fetch("https://ahmadsyahiransite.site/api/tasks/"+i,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+u.authToken},body:JSON.stringify({complete:c})});if(o.ok){m();const d=await o.json();r({title:"Status",description:d.message})}else console.error("Login failed",o.statusText)}catch(c){console.log(c),console.error("An error occurred during login",c)}}return(c,o)=>(h(),v(t(k),{variant:"outline",onClick:n,size:"icon",class:"mx-1"},{default:e(()=>[s.taskComplete==="X"?(h(),v(t(lt),{key:0,class:"w-5 h-5 mx-1",color:"#0ed836"})):(h(),D(E,{key:1},[],64))]),_:1}))}}),kt={class:"flex-1 space-y-4 p-8 pt-6"},gt={class:"flex items-center justify-between space-y-2"},yt=f("h2",{class:"text-3xl font-bold tracking-tight"}," To Do List ",-1),vt={class:"flex items-center space-x-2"},St=w({__name:"ToDoList",props:{tasksLength:{},tasksLengthModifiers:{}},emits:["update:tasksLength"],setup(s){async function _(){await u.fetchData(),i.value=u.tasksLength}const i=tt(s,"tasksLength"),u=$();_();const{tasks:r}=at(u);return(p,m)=>(h(),D("div",kt,[f("div",gt,[yt,f("div",vt,[a(ct)])]),a(t(Q),{"default-value":"overview",class:"space-y-4"},{default:e(()=>[a(t(H),{value:"overview",class:"space-y-4"},{default:e(()=>[a(t(G),null,{default:e(()=>[a(t(K),null,{default:e(()=>[l("A list of all tasks.")]),_:1}),a(t(R),null,{default:e(()=>[a(t(P),null,{default:e(()=>[a(t(T)),a(t(T),null,{default:e(()=>[l("Task")]),_:1}),a(t(T),null,{default:e(()=>[l("Created at")]),_:1}),a(t(T),null,{default:e(()=>[l("Updated at")]),_:1}),a(t(T),{class:"text-right"})]),_:1})]),_:1}),a(t(q),null,{default:e(()=>[(h(!0),D(E,null,et(t(r),n=>(h(),v(t(P),{key:n.id},{default:e(()=>[a(t(x),null,{default:e(()=>[a(mt,{taskComplete:n.complete,taskId:n.id},null,8,["taskComplete","taskId"])]),_:2},1024),a(t(x),{class:st({"line-through":n.complete==="X"})},{default:e(()=>[l(b(n.task),1)]),_:2},1032,["class"]),a(t(x),null,{default:e(()=>[l(b(n.created_at?new Date(n.created_at).toLocaleString():"N/A"),1)]),_:2},1024),a(t(x),null,{default:e(()=>[l(b(n.updated_at?new Date(n.updated_at).toLocaleString():"N/A"),1)]),_:2},1024),a(t(x),{class:"text-right"},{default:e(()=>[a(ut,{task:n.task,taskId:n.id},null,8,["task","taskId"]),a(ht,{taskId:n.id},null,8,["taskId"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]))}});export{St as default};
